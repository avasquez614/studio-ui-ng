<h2>
  <span *ngIf="editMode">Editing &quot;{{model.name}}&quot;</span>
  <span *ngIf="!editMode">New Site</span>
</h2>

<div class="mat-form full-width">
  <div class="two column ui grid">
    <div class="column">
      <mat-form-field>
        <input matInput i18n-placeholder placeholder="Site Name"
               [readonly]="editMode"
               (blur)="autoSiteCode()"
               [(ngModel)]="model.name"
               [formControl]="nameFormControl">
        <mat-error i18n *ngIf="nameFormControl.hasError('required')">
          Site name is <strong>required</strong>
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <input matInput i18n-placeholder placeholder="Site Handle"
               [readonly]="editMode"
               [(ngModel)]="model.code"
               [formControl]="codeFormControl">
        <mat-error i18n *ngIf="codeFormControl.hasError('required')">
          Site code is <strong>required</strong>
        </mat-error>
      </mat-form-field>
      <mat-form-field *ngIf="!editMode">
        <mat-select placeholder="Select Blueprint" [value]="model.blueprint" [disabled]="editMode">
          <mat-option *ngFor="let blueprint of blueprints" [value]="blueprint.id">
            {{blueprint.label}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="column">
      <mat-form-field>
        <textarea matInput style="height: 150px"
                  [readonly]="editMode"
                  i18n-placeholder placeholder="Description"
                  [(ngModel)]="model.description"
                  [formControl]="descriptionFormControl"></textarea>
      </mat-form-field>
    </div>
  </div>
</div>

<div class="clearfix">
  <div class="float-right">
    <button class="ui basic button" (click)="done()" tabindex="2">Done</button>
    <!--<button class="ui blue button" i18n
            (click)="update()"
            [disabled]="!formGroup.valid"
            *ngIf="editMode">Update</button>-->
    <button class="ui green button" i18n
            (click)="create()"
            [disabled]="!formGroup.valid"
            *ngIf="!editMode">Create</button>
  </div>
  <div class="float-left" *ngIf="editMode">

    <button class="ui basic button labeled red icon" [matMenuTriggerFor]="deleteConfirm">
      <i class="trash icon"></i> <ng-container i18n>Delete Site</ng-container>
    </button>
    <mat-menu #deleteConfirm="matMenu">
      <button mat-menu-item>Cancel</button>
      <button mat-menu-item [matMenuTriggerFor]="deleteOptions"><i class="warning icon"></i> Confirm Deletion?</button>
    </mat-menu>
    <mat-menu #deleteOptions="matMenu">
      <button mat-menu-item (click)="delete()">Yes, permanently delete site.</button>
    </mat-menu>

  </div>
</div>

<div class="ui dimmer modals page transition visible active" *ngIf="creationRequestPending && !runCreationInBackground">
  <div class="ui small basic test modal transition visible active"
       style="margin-top: -123px; display: block !important;">
    <div class="ui icon header">
      <i class="coffee icon"></i>
      Creating site, please hold&hellip;
    </div>
    <div class="actions text-center">
      <div class="pad-bottom">
        <button class="ui inverted button" (click)="runSiteCreationInBackground()">
          <i class="checkmark icon"></i> <ng-container i18n>Run In Background</ng-container>
        </button>
      </div>
      <small>You'll get notified when done.</small>
    </div>
  </div>
</div>
